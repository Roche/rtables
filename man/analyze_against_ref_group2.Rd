% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/colby_constructors.R
\name{analyze_against_ref_group2}
\alias{analyze_against_ref_group2}
\title{Add ref_group comparison analysis recipe}
\usage{
analyze_against_ref_group2(
  lyt,
  var,
  afun,
  label = if (is.na(var)) "" else var,
  format = NULL,
  nested = TRUE,
  extra_args = list(),
  indent_mod = 0L,
  show_labels = c("default", "hidden", "visible")
)
}
\arguments{
\item{lyt}{layout object pre-data used for tabulation}

\item{var}{string, variable name}

\item{afun}{function. Analysis function, must take \code{x} or \code{df} as its first parameter. Can optionally take other parameters which will be populated by the tabulation framework. See Details in \code{\link{analyze}}.}

\item{format}{format string for cells}

\item{nested}{boolean, Add this as a new top-level split  (defining a new subtable directly under root). Defaults to \code{FALSE}}

\item{extra_args}{list. Extra arguments to be passed to the tabulation function. Element position in thte list corresponds to the children of this split. Named elements in the child-specific lists are ignored if they do not match a formal argument of the ttabulation function.}

\item{indent_mod}{numeric. Modifier for the default indent position for the structure created by this function(subtable, content table, or row) \emph{and all of that structure's children}. Defaults to 0, which corresponds to the unmodified default behavior.}
}
\description{
Add ref_group comparison analysis recipe
}
\examples{

foo <- function(x, x_ref) {
  if (is.null(x)) {
    rcell("-")
  } else {
    rcell(mean(x) - mean(x_ref), format = "xx.xx")
  }
}

basic_table() \%>\%
  split_cols_by("ARM", ref_group = "B: Placebo") \%>\%
  analyze_against_ref_group2("AGE", foo) \%>\%
  build_table(DM)

basic_table() \%>\%
  split_cols_by("ARM", ref_group = "B: Placebo") \%>\%
  analyze_against_ref_group2("AGE", function(df, df_ref, .N_col, .N_total) {
    in_rows( dimensions = rcell(list(nrow(df), nrow(df_ref)), format = "xx / xx"))
  }) \%>\%
  build_table(DM)


}
