% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rtable.R
\name{rtable.data.frame}
\alias{rtable.data.frame}
\title{rtables constructor from dataframe source}
\usage{
\method{rtable}{data.frame}(data, headers = "", format = "", indent = 0)
}
\arguments{
\item{data}{a dataframe containing one row per table row}

\item{headers}{the headers to use for the resulting table}

\item{format}{a single format string (parseable as a rtables format string
(e.g. 'xx.xx'), a \code{\link[rtables]{spf}()} format string), a list of
format strings, or a column name to reference for each row from the source
dataframe.}

\item{indent}{a numeric value or a column name to reference for each row from
the source dataframe.}
}
\value{
\code{rtable} object
}
\description{
rtables constructor from dataframe source
}
\examples{
## basic use with dataframe
t <- rtable(mtcars,
  headers = c('Weight (lbs (tons))', 'Transmission', 'Miles Per Gallon'),
  format = c(
    "\%(wt * 1000).0f (\%(wt * 0.5)0.2f)",
    "\%(ifelse(am == 0, 'automatic', 'manual'))s",
    "\%(mpg).1f"))

\dontrun{
Viewer(t)
}


## using a format column in the dataframe
my_mtcars <- mtcars
my_mtcars$format <- list( c(  # create column of format list for each row
    "\%(wt * 1000).0f (\%(wt * 0.5)0.2f)",
    "\%(ifelse(am == 0, 'automatic', 'manual'))s",
    "\%(mpg).1f"
) )

t <- rtable(my_mtcars,
  headers = c(
    'Weight (lbs (tons))',
    'Transmission',
    'Miles Per Gallon'),
  format = format)

\dontrun{
Viewer(t)
}


## composing from multiple analysis datasets
library(dplyr)
library(tibble) # for `column_to_rownames()`
options(stringsAsFactors = FALSE)

# build analysis datasets
my_data <- bind_rows(
    data.frame(rownames = 'By Transmission'),
    mtcars \%>\% group_by(am) \%>\%
      summarize(n = n(), mpg.mean = mean(mpg), mpg.sd = sd(mpg)) \%>\%
      mutate(
        format = list(c('\%(n)d', '\%(mpg.mean).1f', '\%(mpg.sd).1f')),
        indent = 1,
        rownames = as.character(am)) \%>\%
      select(-am),
    data.frame(rownames = 'By Forward Gear Count'),
    mtcars \%>\% group_by(gear) \%>\%
      summarize(n = n(), mpg.mean = mean(mpg), mpg.sd = sd(mpg)) \%>\%
      mutate(
        format = list(c('\%(n)d', '\%(mpg.mean).2f', '\%(mpg.sd).2f')),
        indent = 1,
        rownames = as.character(gear)) \%>\%
      select(-gear)
   ) \%>\%
  column_to_rownames('rownames')

t <- rtable(my_data, headers = c('n', 'mpg mean', 'mpg sd'), format, indent)

\dontrun{
Viewer(t)
}

}
\author{
Doug Kelkhoff \email{kelkhoff.douglas@gene.com}
}
